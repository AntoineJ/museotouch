#:kivy 1.0
#:import math math

<ImageItem>:
	border: 2 / self.scale
	size_hint: None, None
	size: 512, 512
	scale: 0.30
	container: container
	scale_min: .3
	scale_max: 10
	canvas:
		Color:
			rgb: 1, 1, 1
		Rectangle:
			pos: -self.border, -self.border
			size: self.width + self.border * 2, self.height + self.border * 2
		Color:
			rgb: 0, 0, 0
		Rectangle:
			size: self.size

	FloatLayout:
		size: root.size

		FloatLayout:
			id: container

		Image:
			source: root.source
			size_hint: (1 * (0.3 + 0.7 * root.flip_alpha), 1 * (0.3 + 0.7 * root.flip_alpha))
			pos_hint: {'top': 1}

	Button:
		background_color: (1, 1, 1, root.alpha_button)
		size: (64, 64)
		pos: 512 - 70, 512 - 70
		background_down: 'widgets/btn_moreinfo_down.png'
		background_normal: 'widgets/btn_moreinfo.png'
		on_release: root.on_btn_moreinfo()




<CircularSlider>:
    angle_min: self.value_min * 180
    angle_max: self.value_max * 180

    canvas:
        Color:
            rgb: 0.5490, 1, 1
        Ellipse:
            pos: self.right - self.outer_radius, self.center_y - self.outer_radius
            size: self.outer_radius * 2, self.outer_radius * 2
            angle_start: (root.angle_min + 180) % 360
            angle_end: ((root.angle_max + 180 - 0.00001) % 360)
        Color:
            rgb: 0, 0, 0
        Ellipse:
            pos: self.right - self.inner_radius + 50, self.center_y - self.inner_radius + 50
            size: (self.inner_radius - 50) * 2, (self.inner_radius - 50) * 2
        Color:
            rgb: 1, 1, 1
        Rectangle:
            source: 'widgets/timeline.png'
            pos: self.pos
            size: self.size
        Color:
            rgba: 0.5490, 1, 1, .2
        Line:
            points: (self.right - math.sin(math.radians(self.angle_min)) * self.outer_radius, self.center_y -math.cos(math.radians(self.angle_min)) * self.outer_radius, self.right - math.sin(math.radians(self.angle_min)) * (self.inner_radius - 50), self.center_y -math.cos(math.radians(self.angle_min)) * (self.inner_radius - 50))
        Line:
            points: (self.right - math.sin(math.radians(self.angle_max)) * self.outer_radius, self.center_y -math.cos(math.radians(self.angle_max)) * self.outer_radius, self.right - math.sin(math.radians(self.angle_max)) * (self.inner_radius - 50), self.center_y -math.cos(math.radians(self.angle_max)) * (self.inner_radius - 50))

    BoxLayout:
        size_hint: None, None
        size: (150, 80)
        pos_hint: {'center_x': 0.5, 'center_y': 0.38}
        orientation: 'vertical'
        canvas.before:
            PushMatrix
            Translate:
                xy: root.center_x, root.center_y
            Rotate:
                angle: 90
                axis: 0., 0., 1.
            Translate:
                xy: -root.center_x, -root.center_y
        canvas.after:
            PopMatrix

        Label:
            font_size: 16
            color: (0.5490, 1, 1, 1)
            text: root.text_min
        Label:
            font_size: 16
            color: (0.5490, 1, 1, 1)
            text: root.text_max

<Keyword>:
	color: (1, 1, 1, 1) if self.selected else (.5, .5, .5, 1) 
	canvas.before:
		Color:
			rgb: 1, 1, 1
		Rectangle:
            pos: int(self.center_x - self.texture_size[0] / 2. - 32), int(self.center_y - 10)
			size: 20, 20
			source: 'widgets/circle%s.png' % ('_selected' if self.selected else '')

<SizeSlider>:
	canvas:
		Color:
			rgb: 1, 1, 1
		Rectangle:
			pos: self.x - 40, self.y
			size: (500, 30)
			source: 'widgets/taille.png'
        Color:
            rgb: 0.5490, 1, 1
		Rectangle:
			pos: self.x + self.value_min * self.width, self.center_y - 10
			size: self.width * (self.value_max - self.value_min), 20